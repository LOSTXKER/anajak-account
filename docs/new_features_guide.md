# ЁЯОЙ New Features Guide

**р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕ер╣Ир╕▓р╕кр╕╕р╕Ф:** 5 р╕Шр╕▒р╕Щр╕зр╕▓р╕Др╕б 2025

---

## тЬи Features р╣Гр╕лр╕бр╣И

### 1. ЁЯУДтЖТЁЯУГ Document Conversion (р╣Бр╕Ыр╕ер╕Зр╣Ар╕нр╕Бр╕кр╕▓р╕г)

**р╕Др╕╖р╕нр╕нр╕░р╣Др╕г:**
- р╣Бр╕Ыр╕ер╕Зр╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕лр╕Щр╕╢р╣Ир╕Зр╣Ар╕Ыр╣Зр╕Щр╕нр╕╡р╕Бр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕лр╕Щр╕╢р╣Ир╕Зр╣Др╕Фр╣Йр╣Гр╕Щ 1 р╕Др╕ер╕┤р╕Б
- р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Ир╕▓р╕Бр╣Ар╕нр╕Бр╕кр╕▓р╕гр╣Ар╕Фр╕┤р╕б (р╕ер╕╣р╕Бр╕Др╣Йр╕▓, р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓, р╕вр╕нр╕Фр╣Ар╕Зр╕┤р╕Щ)
- р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Лр╣Йр╕│

**р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕нр╕вр╣Ир╕▓р╕Зр╣Др╕г:**

1. р╣Ар╕Ыр╕┤р╕Фр╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Бр╕Ыр╕ер╕З
2. р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б **"р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б"** тЖТ **"р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щр╣Ар╕нр╕Бр╕кр╕▓р╕гр╕нр╕╖р╣Ир╕Щ"**
3. р╣Ар╕ер╕╖р╕нр╕Бр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г:
   - р╣Гр╕Ър╣Ар╕кр╕Щр╕нр╕гр╕▓р╕Др╕▓ тЖТ р╣Гр╕Ър╣Бр╕Ир╣Йр╕Зр╕лр╕Щр╕╡р╣Й
   - р╣Гр╕Ър╣Бр╕Ир╣Йр╕Зр╕лр╕Щр╕╡р╣Й тЖТ р╣Гр╕Ър╣Ар╕кр╕гр╣Зр╕Ир╕гр╕▒р╕Ър╣Ар╕Зр╕┤р╕Щ
   - р╕пр╕ер╕п
4. р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕кр╕гр╣Йр╕▓р╕Зр╣Ар╕нр╕Бр╕кр╕▓р╕гр╣Гр╕лр╕бр╣Ир╕Юр╕гр╣Йр╕нр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Др╕▒р╕Фр╕ер╕нр╕Бр╕бр╕▓

**р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ:**

```
Flow: р╣Гр╕Ър╣Ар╕кр╕Щр╕нр╕гр╕▓р╕Др╕▓ тЖТ р╣Гр╕Ър╣Бр╕Ир╣Йр╕Зр╕лр╕Щр╕╡р╣Й тЖТ р╣Гр╕Ър╣Ар╕кр╕гр╣Зр╕Ир╕гр╕▒р╕Ър╣Ар╕Зр╕┤р╕Щ

1. р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕Ър╣Ар╕кр╕Щр╕нр╕гр╕▓р╕Др╕▓ QT2025-0001
2. р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕Хр╕Бр╕ер╕З тЖТ р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ IV2025-0001
3. р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ тЖТ р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ RC2025-0001

тЬЕ р╕Ыр╕гр╕░р╕лр╕вр╕▒р╕Фр╣Ар╕зр╕ер╕▓ 80% р╕Ир╕▓р╕Бр╕Бр╕▓р╕гр╕Бр╕гр╕нр╕Бр╕Лр╣Йр╕│!
```

**API Endpoints:**
- `POST /api/documents/[id]/convert` - р╣Бр╕Ыр╕ер╕Зр╣Ар╕нр╕Бр╕кр╕▓р╕г
- `POST /api/documents/[id]/duplicate` - р╕Др╕▒р╕Фр╕ер╕нр╕Бр╣Ар╕нр╕Бр╕кр╕▓р╕г

---

### 2. ЁЯУз Email Sending System (р╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕е)

**р╕Др╕╖р╕нр╕нр╕░р╣Др╕г:**
- р╕кр╣Ир╕Зр╣Ар╕нр╕Бр╕кр╕▓р╕гр╣Гр╕лр╣Йр╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕Чр╕▓р╕Зр╕нр╕╡р╣Ар╕бр╕е
- Email template р╕кр╕зр╕вр╕Зр╕▓р╕бр╣Бр╕Ър╕Ър╕бр╕╖р╕нр╕нр╕▓р╕Кр╕╡р╕Ю
- Track р╕Бр╕▓р╕гр╕кр╣Ир╕З (р╕Цр╣Йр╕▓р╣Гр╕Кр╣Й Resend Pro)

**Setup:**

1. **р╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щ Resend:**
   - р╣Др╕Ыр╕Чр╕╡р╣И https://resend.com
   - р╕кр╕бр╕▒р╕Др╕гр╕Яр╕гр╕╡ (100 emails/р╕зр╕▒р╕Щ)
   - р╕кр╕гр╣Йр╕▓р╕З API Key

2. **р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Environment:**

```bash
# .env
RESEND_API_KEY="re_xxxxxxxxxxxxx"
RESEND_FROM_EMAIL="Account Pro <onboarding@resend.dev>"
```

3. **р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ:**
   - р╣Ар╕Ыр╕┤р╕Фр╣Ар╕нр╕Бр╕кр╕▓р╕г
   - р╕Др╕ер╕┤р╕Б **"р╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕е"**
   - р╕Бр╕гр╕нр╕Бр╕нр╕╡р╣Ар╕бр╕ер╕Ьр╕╣р╣Йр╕гр╕▒р╕Ъ + р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б
   - р╕Др╕ер╕┤р╕Б **"р╕кр╣Ир╕З"**

**Email Template:**
- Header р╕Юр╕гр╣Йр╕нр╕б Logo р╕Ър╕гр╕┤р╕йр╕▒р╕Ч
- р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕нр╕Бр╕кр╕▓р╕г (р╣Ар╕ер╕Вр╕Чр╕╡р╣И, р╕вр╕нр╕Фр╣Ар╕Зр╕┤р╕Щ)
- р╕Ыр╕╕р╣Ир╕б "р╕Фр╕╣р╣Ар╕нр╕Бр╕кр╕▓р╕г" (р╕Цр╣Йр╕▓р╕бр╕╡ PDF link)
- Footer р╕кр╕зр╕вр╕Зр╕▓р╕б

**API Endpoints:**
- `POST /api/documents/[id]/send-email` - р╕кр╣Ир╕Зр╣Ар╕нр╕Бр╕кр╕▓р╕г
- р╣Гр╕Кр╣Й `sendDocumentEmail()` function р╕Ир╕▓р╕Б `@/lib/email`

**Advanced:**

```typescript
import { sendPaymentReminderEmail } from '@/lib/email'

// р╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕ер╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ
await sendPaymentReminderEmail({
  to: 'customer@example.com',
  documentNumber: 'IV2025-0001',
  dueDate: '2025-12-15',
  amount: 10000,
  companyName: 'р╕Ър╕гр╕┤р╕йр╕▒р╕Ч р╣Ар╕Фр╣Вр╕б р╕Ир╕│р╕Бр╕▒р╕Ф',
})
```

---

### 3. ЁЯУж Inventory Tracking (р╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕кр╕Хр╣Зр╕нр╕Б)

**р╕Др╕╖р╕нр╕нр╕░р╣Др╕г:**
- р╕Хр╕▒р╕Фр╕кр╕Хр╣Зр╕нр╕Бр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╕Вр╕▓р╕в (Invoice/Receipt)
- р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕Хр╣Зр╕нр╕Бр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╕Лр╕╖р╣Йр╕н (Purchase Order)
- р╕Фр╕╣р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Др╕зр╕▓р╕бр╣Ар╕Др╕ер╕╖р╣Ир╕нр╕Щр╣Др╕лр╕зр╕кр╕Хр╣Зр╕нр╕Б

**р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕нр╕вр╣Ир╕▓р╕Зр╣Др╕г:**

1. **р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓:**
   - р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕Щр╕лр╕Щр╣Йр╕▓ "р╕кр╕┤р╕Щр╕Др╣Йр╕▓/р╕Ър╕гр╕┤р╕Бр╕▓р╕г"
   - р╕Хр╕▒р╣Йр╕Зр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╣Ар╕Ыр╣Зр╕Щ **"р╕кр╕┤р╕Щр╕Др╣Йр╕▓"** (р╣Др╕бр╣Ир╣Гр╕Кр╣Ир╕Ър╕гр╕┤р╕Бр╕▓р╕г)
   - р╕Бр╕гр╕нр╕Бр╕Ир╕│р╕Щр╕зр╕Щр╕Др╕Зр╕Др╕ер╕▒р╕З
   - р╕Хр╕▒р╣Йр╕Зр╕кр╕Хр╣Зр╕нр╕Бр╕Вр╕▒р╣Йр╕Щр╕Хр╣Ир╕│

2. **р╕кр╕гр╣Йр╕▓р╕Зр╣Ар╕нр╕Бр╕кр╕▓р╕г:**
   - р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕Ър╣Бр╕Ир╣Йр╕Зр╕лр╕Щр╕╡р╣Й (Invoice) тЖТ р╕Хр╕▒р╕Фр╕кр╕Хр╣Зр╕нр╕Бр╕нр╕нр╕Б
   - р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕Ър╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н (PO) тЖТ р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕Хр╣Зр╕нр╕Бр╣Ар╕Вр╣Йр╕▓

3. **р╕Фр╕╣р╕гр╕▓р╕вр╕Зр╕▓р╕Щ:**
   - р╣Др╕Ыр╕Чр╕╡р╣И **"р╕Др╕ер╕▒р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓"**
   - р╕Фр╕╣р╕Др╕зр╕▓р╕бр╣Ар╕Др╕ер╕╖р╣Ир╕нр╕Щр╣Др╕лр╕зр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
   - р╕Бр╕гр╕нр╕Зр╕Хр╕▓р╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓

**Stock Movement Types:**

| Type | Label | Description |
|------|-------|-------------|
| `in` | р╕гр╕▒р╕Ър╣Ар╕Вр╣Йр╕▓ | р╕Лр╕╖р╣Йр╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Ар╕Вр╣Йр╕▓ (PO, Bill) |
| `out` | р╕Ир╣Ир╕▓р╕вр╕нр╕нр╕Б | р╕Вр╕▓р╕вр╕кр╕┤р╕Щр╕Др╣Йр╕▓ (Invoice, Receipt) |
| `adjust` | р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З | р╕Ыр╕гр╕▒р╕Ър╕кр╕Хр╣Зр╕нр╕Бр╕Фр╣Йр╕зр╕вр╕Хр╕▒р╕зр╣Ар╕нр╕З |

**API Endpoints:**
- `GET /api/inventory/movements` - р╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Ар╕Др╕ер╕╖р╣Ир╕нр╕Щр╣Др╕лр╕з
- `POST /api/inventory/movements` - р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕г

**Functions:**

```typescript
import { createStockMovement, processDocumentStockMovements } from '@/lib/inventory'

// р╕кр╕гр╣Йр╕▓р╕З movement р╣Ар╕Фр╕╡р╣Ир╕вр╕з
await createStockMovement({
  companyId: 'xxx',
  productId: 'yyy',
  quantity: 10,
  type: 'in',
  notes: 'р╕гр╕▒р╕Ър╣Ар╕Вр╣Йр╕▓р╕Ир╕▓р╕Бр╕Лр╕▒р╕Юр╕Юр╕ер╕▓р╕вр╣Ар╕нр╕нр╕гр╣М',
})

// Process р╕Ир╕▓р╕Бр╣Ар╕нр╕Бр╕кр╕▓р╕г (р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤)
await processDocumentStockMovements(
  companyId,
  documentId,
  'invoice', // document type
  lineItems
)
```

**Low Stock Alert:**
- р╕гр╕░р╕Ър╕Ър╕Ир╕░р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╣Ар╕бр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕Бр╕ер╣Йр╕лр╕бр╕Ф
- р╣Бр╕кр╕Фр╕Зр╣Гр╕Щ Dashboard
- р╣Ар╕гр╕╡р╕вр╕Зр╕Хр╕▓р╕бр╕Др╕зр╕▓р╕бр╣Ар╕гр╣Ир╕Зр╕Фр╣Ир╕зр╕Щ

---

## ЁЯУЛ р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕гр╣Ир╕зр╕бр╕Бр╕▒р╕Щ (Workflow)

### р╕кр╕Цр╕▓р╕Щр╕Бр╕▓р╕гр╕Ур╣М: р╕Вр╕▓р╕вр╕кр╕┤р╕Щр╕Др╣Йр╕▓

```
1. р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕кр╕нр╕Ър╕Цр╕▓р╕б
   тФФтФАтЖТ р╕кр╕гр╣Йр╕▓р╕З "р╣Гр╕Ър╣Ар╕кр╕Щр╕нр╕гр╕▓р╕Др╕▓" (QT2025-0001)
       тФФтФАтЖТ р╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕ер╣Гр╕лр╣Йр╕ер╕╣р╕Бр╕Др╣Йр╕▓ ЁЯУз

2. р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕Хр╕Бр╕ер╕З
   тФФтФАтЖТ р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ "р╣Гр╕Ър╣Бр╕Ир╣Йр╕Зр╕лр╕Щр╕╡р╣Й" (IV2025-0001) ЁЯУДтЖТЁЯУГ
       тФФтФАтЖТ р╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕ер╕вр╕╖р╕Щр╕вр╕▒р╕Щ ЁЯУз
       тФФтФАтЖТ р╕Хр╕▒р╕Фр╕кр╕Хр╣Зр╕нр╕Бр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤ ЁЯУж

3. р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ
   тФФтФАтЖТ р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ "р╣Гр╕Ър╣Ар╕кр╕гр╣Зр╕Ир╕гр╕▒р╕Ър╣Ар╕Зр╕┤р╕Щ" (RC2025-0001) ЁЯУДтЖТЁЯУГ
       тФФтФАтЖТ р╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕ер╕Вр╕нр╕Ър╕Др╕╕р╕У ЁЯУз

тЬЕ р╣Ар╕кр╕гр╣Зр╕Ир╕ар╕▓р╕вр╣Гр╕Щ 5 р╕Щр╕▓р╕Чр╕╡!
```

---

## ЁЯЫа Technical Details

### Database Schema

```sql
-- Stock Movement Table
CREATE TABLE InventoryMovement (
  id UUID PRIMARY KEY,
  companyId UUID NOT NULL,
  productId UUID NOT NULL,
  quantity INT NOT NULL,
  type ENUM('in', 'out', 'adjust'),
  documentId UUID,
  reference TEXT,
  notes TEXT,
  createdAt TIMESTAMP DEFAULT NOW()
);
```

### Environment Variables

```bash
# .env
DATABASE_URL="postgresql://..."
JWT_SECRET="xxx"
RESEND_API_KEY="re_xxx"  # тЖР New!
RESEND_FROM_EMAIL="Account Pro <onboarding@resend.dev>"  # тЖР New!
```

---

## ЁЯЪА Performance

### Before vs After:

| Task | Before | After | Saved |
|------|--------|-------|-------|
| р╕кр╕гр╣Йр╕▓р╕Зр╣Ар╕нр╕Бр╕кр╕▓р╕г 3 р╕Ыр╕гр╕░р╣Ар╕ар╕Ч | 15 р╕Щр╕▓р╕Чр╕╡ | 3 р╕Щр╕▓р╕Чр╕╡ | **80%** |
| р╕кр╣Ир╕Зр╣Ар╕нр╕Бр╕кр╕▓р╕гр╣Гр╕лр╣Йр╕ер╕╣р╕Бр╕Др╣Йр╕▓ | 5 р╕Щр╕▓р╕Чр╕╡ | 10 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡ | **97%** |
| р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Хр╣Зр╕нр╕Б | Manual | Real-time | **100%** |

---

## ЁЯУЮ Support

р╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓?
1. р╕Фр╕╣ [README.md](../README.md)
2. р╕Фр╕╣ [Database Setup](./database_setup.md)
3. р╣Ар╕Ыр╕┤р╕Ф GitHub Issue

---

**Made with тЭдя╕П for Thai SMEs** ЁЯЗ╣ЁЯЗн

